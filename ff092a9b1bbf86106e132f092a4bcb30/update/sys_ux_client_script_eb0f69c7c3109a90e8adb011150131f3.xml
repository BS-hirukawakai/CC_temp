<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ux_client_script">
    <sys_ux_client_script action="INSERT_OR_UPDATE">
        <controller_preset/>
        <includes/>
        <macroponent display_value="&quot;[ドラフトメール] ページ&quot;">e5f8868ac31c1290e8adb011150131e7</macroponent>
        <name>handleRecordStatusChanged</name>
        <preset/>
        <required_translations>[
    
]</required_translations>
        <script><![CDATA[function script({
	api: { emit },
	event: {
		payload: {
			status,
			table,
			sys_id: sysId,
			title,
			targetRecord,
			targetTable
		}
	},
	helpers
}) {
	let payload = { isDirty: false };
	switch (status) {
		case 'inserted':
			payload = {
				isDirty: false,
				status: status,
				screenParams: {
					table,
					sysId
				},
				title: title
			};
			break;
		case 'modified':
			payload.isDirty = true;
			break;
		case 'createDraft':
			emit('NAV_ITEM_SELECTED', {
				route: 'record',
				targetRoute: 'current',
				fields: {
					table: 'sys_email_draft',
					sysId: '-1'
				},
				params: {
					parentTable: targetTable,
					parentSysId: targetRecord,
					headerValue: 'New Email',
					dirtyFields: [],
					extraParams: `parentTable/${targetTable}/parentSysId/${targetRecord}/headerValue/New%20Email/dirtyFields/`
				},
				redirect: true,
				multiInstField: 'sysId'
			});
			break;
		case 'discardDraft':
			payload = { status: 'closed' };
			break;
		case 'openDraft':
			emit('NAV_ITEM_SELECTED', {
				route: 'record',
				targetRoute: 'current',
				fields: {
					table: 'sys_email_draft',
					sysId: sysId
				},
				params: {
					parentTable: targetTable,
					parentSysId: targetRecord,
					headerValue: 'Open Email',
					dirtyFields: [],
					extraParams: `parentTable/${targetTable}/parentSysId/${targetRecord}/headerValue/New%20Email/dirtyFields/`
				}
			});
			break;
		case 'closeDraft':
				payload = { status: 'closed' };
			break;
	}
	helpers.screen.updateStatus(payload);
}]]></script>
        <script_api_version>2.0.0</script_api_version>
        <sys_class_name>sys_ux_client_script</sys_class_name>
        <sys_created_by>akamatsu.shota@blueship.co.jp</sys_created_by>
        <sys_created_on>2024-09-02 03:00:03</sys_created_on>
        <sys_id>eb0f69c7c3109a90e8adb011150131f3</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_name>handleRecordStatusChanged</sys_name>
        <sys_package display_value="CCテンプレート" source="x_bllt_bs_cc">ff092a9b1bbf86106e132f092a4bcb30</sys_package>
        <sys_policy/>
        <sys_scope display_value="CCテンプレート">ff092a9b1bbf86106e132f092a4bcb30</sys_scope>
        <sys_update_name>sys_ux_client_script_eb0f69c7c3109a90e8adb011150131f3</sys_update_name>
        <sys_updated_by>akamatsu.shota@blueship.co.jp</sys_updated_by>
        <sys_updated_on>2024-09-02 03:00:03</sys_updated_on>
        <target>macroponent</target>
        <type>default</type>
    </sys_ux_client_script>
</record_update>
